<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Debug Book</title>
    <meta name="author" content="Debug Author">
    <meta name="description" content="A test book for debugging the pipeline">
    
    <!-- Embedded font -->
    <style>
        @font-face {
            font-family: 'Inter';
            font-weight: 400;
            font-style: normal;
            src: url('data:font/woff2;base64,d09GMgABAAAAA...') format('woff2');
            font-display: swap;
        }
        
        
        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            margin: 1.5em 0 0.5em;
            line-height: 1.2;
        }
        
        h1 { font-size: 2.5em; }
        h2 { font-size: 2em; }
        h3 { font-size: 1.5em; }
        
        p {
            margin: 1em 0;
        }
        
        /* Code blocks */
        pre {
            background: #f5f5f5;
            padding: 1em;
            border-radius: 4px;
            overflow-x: auto;
        }
        
        code {
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 2px;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        
        /* Links */
        a {
            color: #0066cc;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Chapter spacing */
        .chapter {
            margin: 4em 0;
            page-break-after: always;
        }
        
        /* Cover page */
        .cover-page {
            text-align: center;
            margin: 4em 0;
            page-break-after: always;
        }
        
        .cover-page img {
            max-width: 400px;
            width: 100%;
            height: auto;
            margin: 2em auto;
        }
        
        /* Table of contents */
        .toc {
            margin: 2em 0;
            page-break-after: always;
        }
        
        .toc ol {
            list-style: decimal;
            padding-left: 2em;
        }
        
        .toc li {
            margin: 0.5em 0;
        }
        
        /* PDF button - FAB style */
        .fab-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .fab {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            background: #2563eb;
            color: white;
            border-radius: 50%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            font-size: 24px;
            transition: all 0.3s ease;
        }
        
        .fab:hover {
            background: #1d4ed8;
            transform: scale(1.1);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        /* Print styles */
        @media print {
            @page {
                size: 148mm 210mm; /* A5 size */
                margin: 20mm;
            }
            
            body {
                font-size: 11pt;
                line-height: 1.5;
                color: #000;
                background: #fff;
                padding: 0;
            }
            
            .container {
                max-width: 100%;
                margin: 0;
            }
            
            /* Clean chapter breaks */
            .chapter {
                page-break-before: always;
                page-break-after: always;
            }
            
            /* Avoid breaking inside elements */
            h1, h2, h3, h4, h5, h6 {
                page-break-after: avoid;
            }
            
            p {
                orphans: 3;
                widows: 3;
            }
            
            /* Hide non-printable elements */
            .sidebar,
            .fab-container,
            .reading-progress,
            .font-controls,
            .no-print {
                display: none !important;
            }
            
            /* Optimize images for print */
            img {
                max-width: 100%;
                page-break-inside: avoid;
            }
            
            /* Links */
            a {
                color: #000;
                text-decoration: underline;
            }
            
            /* Show link URLs in print */
            a[href^="http"]:after {
                content: " (" attr(href) ")";
                font-size: 0.8em;
                color: #666;
            }
            
            /* But not for internal links */
            a[href^="#"]:after {
                content: "";
            }
        }
        
    </style>
    
    
        <style id="dark-mode-styles">
        @media (prefers-color-scheme: dark) {
            body {
                background: #1a1a1a;
                color: #e0e0e0;
            }
            
            pre, code {
                background: #2a2a2a;
                color: #e0e0e0;
            }
            
            a {
                color: #4db8ff;
            }
        }
        </style>
        
</head>
<body>
    <div class="container">
        <div class="reading-progress"></div>
        
        <main class="content">
            <nav class="toc">
<h2>Table of Contents</h2>
<ol>
<li><a href="#chapter-1">Chapter 1: Introduction to Testing</a></li>
</ol>
</nav>

<section id="chapter-1" class="chapter">
                <h1 id="chapter-1-introduction-to-testing">Chapter 1: Introduction to Testing<a aria-hidden="true" tabindex="-1" href="#chapter-1-introduction-to-testing"> üîó</a></h1>
<p>This is a test chapter for debugging the ebook automation pipeline.</p>
<h2 id="section-11-basic-content">Section 1.1: Basic Content<a aria-hidden="true" tabindex="-1" href="#section-11-basic-content"> üîó</a></h2>
<p>Here's some basic content with <strong>bold text</strong> and <em>italic text</em>.</p>
<h3 id="subsection-111-code-example">Subsection 1.1.1: Code Example<a aria-hidden="true" tabindex="-1" href="#subsection-111-code-example"> üîó</a></h3>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">helloWorld</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!"</span>);
}
</code></pre>
<h2 id="section-12-lists-and-links">Section 1.2: Lists and Links<a aria-hidden="true" tabindex="-1" href="#section-12-lists-and-links"> üîó</a></h2>
<h3 id="unordered-list">Unordered List:<a aria-hidden="true" tabindex="-1" href="#unordered-list"> üîó</a></h3>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item with <a href="https://example.com">a link</a></li>
</ul>
<h3 id="ordered-list">Ordered List:<a aria-hidden="true" tabindex="-1" href="#ordered-list"> üîó</a></h3>
<ol>
<li>First step</li>
<li>Second step</li>
<li>Third step</li>
</ol>
<h2 id="section-13-blockquotes-and-tables">Section 1.3: Blockquotes and Tables<a aria-hidden="true" tabindex="-1" href="#section-13-blockquotes-and-tables"> üîó</a></h2>
<blockquote>
<p>This is a blockquote for testing.
It spans multiple lines.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data 1</td>
<td>Data 2</td>
<td>Data 3</td>
</tr>
<tr>
<td>Data 4</td>
<td>Data 5</td>
<td>Data 6</td>
</tr>
</tbody>
</table>
<h2 id="conclusion">Conclusion<a aria-hidden="true" tabindex="-1" href="#conclusion"> üîó</a></h2>
<p>This test chapter contains various markdown elements to test the formatter.</p>
            </section>


        </main>
        
        
        <div class="font-controls">
            <button onclick="changeFontSize(-1)">A-</button>
            <button onclick="changeFontSize(1)">A+</button>
        </div>
        
    </div>
    
    <!-- PDF Download Button -->
    <div class="fab-container">
        <a href="javascript:window.print()" class="fab" title="Download PDF">
            üñ®Ô∏è
        </a>
    </div>
    
    <script>
        
        // Font size controls
        function changeFontSize(delta) {
            const body = document.body;
            const currentSize = parseFloat(getComputedStyle(body).fontSize);
            body.style.fontSize = (currentSize + delta) + 'px';
        }
        
        // Reading progress
        if (document.querySelector('.reading-progress')) {
            window.addEventListener('scroll', () => {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                document.querySelector('.reading-progress').style.width = scrolled + '%';
            });
        }
        
    </script>
</body>
</html>